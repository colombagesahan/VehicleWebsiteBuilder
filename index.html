<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VehicleWebsiteBuilder</title>
    <!-- Modern Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- GLOBAL NOTIFICATIONS -->
    <div id="loader" class="loader-overlay hidden">
        <div class="spinner"></div>
        <p id="loaderText">Processing...</p>
    </div>
    <div id="toastContainer" class="toast-container"></div>

    <!-- MODAL OVERLAY (Generic) -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="close-modal" onclick="ui.closeModal()">&times;</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- ADS & PROMO MODALS -->
    <div id="adModal" class="modal-overlay hidden">
        <div class="modal-content ad-content">
            <button class="close-modal" onclick="document.getElementById('adModal').classList.add('hidden')">&times;</button>
            <div id="adContentArea"></div>
        </div>
    </div>

    <div id="fbModal" class="modal-overlay hidden">
        <div class="modal-content fb-content text-center">
            <button class="close-modal" onclick="document.getElementById('fbModal').classList.add('hidden')">&times;</button>
            <i class="fa-brands fa-facebook text-primary" style="font-size: 3rem; margin-bottom:1rem;"></i>
            <h3>Like us on Facebook!</h3>
            <div id="fbLinkArea" class="mt-4"></div>
        </div>
    </div>

    <!-- =======================================================
         PART 1: THE BUILDER PLATFORM (Dashboard)
    ======================================================== -->
    <div id="platformApp">
        
        <!-- Platform Navigation -->
        <nav class="navbar">
            <div class="nav-brand">Vehicle<span>Builder</span></div>
            <div class="nav-links">
                <button id="btnLoginNav" class="btn btn-primary btn-sm">Login</button>
                <button id="btnLogoutNav" class="btn btn-outline btn-sm hidden">Logout</button>
            </div>
        </nav>

        <!-- Landing View -->
        <section id="viewLanding" class="view active">
            <div class="hero">
                <h1>Create Your Professional Vehicle Sales Website</h1>
                <p>Powerful, responsive, and easy to use. Start selling in minutes.</p>
                <button class="btn btn-primary btn-lg" onclick="ui.showView('viewAuth')">Get Started</button>
            </div>
            <div class="features">
                <div class="feat-card"><i class="fa-solid fa-mobile-screen"></i><h3>100% Mobile Ready</h3></div>
                <div class="feat-card"><i class="fa-solid fa-bolt"></i><h3>Fast Performance</h3></div>
                <div class="feat-card"><i class="fa-solid fa-images"></i><h3>Auto Compression</h3></div>
            </div>
        </section>

        <!-- Auth View -->
        <section id="viewAuth" class="view hidden">
            <div class="auth-container">
                <h2>Welcome Back</h2>
                <form id="authForm">
                    <input type="email" id="authEmail" placeholder="Email Address" required>
                    <input type="password" id="authPass" placeholder="Password" required>
                    <div class="btn-group">
                        <button type="button" id="btnLogin" class="btn btn-primary">Login</button>
                        <button type="button" id="btnSignup" class="btn btn-secondary">Create Account</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- User Dashboard View -->
        <section id="viewDashboard" class="view hidden">
            <div class="dash-layout">
                <aside class="dash-sidebar">
                    <div class="user-info">
                        <!-- Default avatar icon -->
                        <div class="avatar-circle" id="dashAvatar"><i class="fa-solid fa-user"></i></div>
                        <span id="dashEmail">User</span>
                    </div>
                    <nav class="side-nav">
                        <button onclick="ui.switchTab('tabProfile')" class="nav-item active"><i class="fa-solid fa-id-card"></i> Profile</button>
                        <button onclick="ui.switchTab('tabAddVehicle')" class="nav-item"><i class="fa-solid fa-plus"></i> Add Vehicle</button>
                        <button onclick="ui.switchTab('tabMyVehicles')" class="nav-item"><i class="fa-solid fa-list"></i> My Vehicles</button>
                        <button onclick="ui.switchTab('tabWebsite')" class="nav-item"><i class="fa-solid fa-wand-magic-sparkles"></i> My Website</button>
                        <button onclick="ui.switchTab('tabConnect')" class="nav-item"><i class="fa-solid fa-users"></i> Connect</button>
                        <button onclick="ui.switchTab('tabAdmin')" id="navAdmin" class="nav-item hidden"><i class="fa-solid fa-lock"></i> Admin</button>
                    </nav>
                </aside>

                <main class="dash-content">
                    
                    <!-- Tab: Profile -->
                    <div id="tabProfile" class="dash-tab active">
                        <h2>User Profile</h2>
                        <div class="card">
                            <div class="form-group">
                                <label>Profile Photo</label>
                                <input type="file" id="profPhoto" accept="image/*">
                            </div>
                            <div class="form-group">
                                <label>Phone Number *</label>
                                <input type="tel" id="profPhone">
                            </div>
                            <div class="form-group">
                                <label>WhatsApp Number *</label>
                                <input type="tel" id="profWhatsapp" placeholder="e.g. 94771234567">
                            </div>
                            <div class="form-group">
                                <label>Address *</label>
                                <textarea id="profAddress"></textarea>
                            </div>
                            <button id="saveProfile" class="btn btn-primary">Save Profile</button>
                        </div>
                    </div>

                    <!-- Tab: Add Vehicle -->
                    <div id="tabAddVehicle" class="dash-tab">
                        <h2>Add New Vehicle</h2>
                        <form id="formAddVehicle" class="card">
                            <div class="grid-2">
                                <select id="vCat" required></select>
                                <input type="text" id="vBrand" placeholder="Brand (e.g. Toyota)" required>
                                <input type="text" id="vModel" placeholder="Model (e.g. Premio)" required>
                                <input type="text" id="vTrim" placeholder="Trim (e.g. G Superior)">
                                <input type="number" id="vYear" placeholder="Year" required>
                                <input type="text" id="vCond" placeholder="Condition">
                                <select id="vTrans" required>
                                    <option value="Automatic">Automatic</option>
                                    <option value="Manual">Manual</option>
                                    <option value="Tiptronic">Tiptronic</option>
                                </select>
                                <select id="vFuel" required>
                                    <option value="Petrol">Petrol</option>
                                    <option value="Diesel">Diesel</option>
                                    <option value="Hybrid">Hybrid</option>
                                    <option value="Electric">Electric</option>
                                </select>
                                <input type="number" id="vPrice" placeholder="Price (Rs)" required>
                                <input type="number" id="vMileage" placeholder="Mileage (km)" required>
                                <input type="text" id="vBody" placeholder="Body Type">
                                <input type="text" id="vEngine" placeholder="Engine Capacity">
                                <select id="vBook">
                                    <option value="Original">Original Book</option>
                                    <option value="Duplicate">Duplicate Book</option>
                                </select>
                                <select id="vFinance">
                                    <option value="no">No active finance</option>
                                    <option value="yes">Active finance agreement</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Description (Max 500 words)</label>
                                <textarea id="vDesc" maxlength="2500"></textarea>
                            </div>
                            <div class="form-group">
                                <label>YouTube Link</label>
                                <input type="url" id="vYoutube">
                            </div>
                            <div class="form-group">
                                <label>Images (Max 10)</label>
                                <input type="file" id="vPhotos" multiple accept="image/*">
                                <div id="vPreview" class="img-preview-grid"></div>
                            </div>
                            <button type="submit" class="btn btn-primary full-width">Upload & Publish</button>
                        </form>
                    </div>

                    <!-- Tab: My Vehicles -->
                    <div id="tabMyVehicles" class="dash-tab">
                        <h2>My Inventory</h2>
                        <div class="filter-bar">
                            <input type="text" id="searchV" placeholder="Search by brand...">
                            <select id="sortV">
                                <option value="new">Newest First</option>
                                <option value="old">Oldest First</option>
                            </select>
                        </div>
                        <div id="myVehiclesList" class="vehicle-grid"></div>
                    </div>

                    <!-- Tab: Website Builder -->
                    <div id="tabWebsite" class="dash-tab">
                        <h2>Website Builder</h2>
                        <div class="info-banner">
                            Your Website URL: <a href="#" id="mySiteLink" target="_blank">Generating...</a>
                        </div>
                        <div class="card">
                            <h3>Branding</h3>
                            <input type="text" id="webName" placeholder="Car Sale Name">
                            <label>Logo</label><input type="file" id="webLogo">
                            <label>Favicon</label><input type="file" id="webFavicon">
                            
                            <h3>Navigation & Layout</h3>
                            <select id="webNavStyle">
                                <option value="1">Style 1: Center Stacked</option>
                                <option value="2">Style 2: Left Aligned</option>
                            </select>

                            <h3>Content</h3>
                            <input type="text" id="webHeroTitle" placeholder="Hero Title">
                            <input type="text" id="webHeroSub" placeholder="Hero Subtitle">
                            <textarea id="webAbout" placeholder="About Us Content"></textarea>
                            <textarea id="webWhy" placeholder="Why Choose Us (One reason per line)"></textarea>
                            <input type="text" id="webFb" placeholder="Facebook Page Link">
                            
                            <h3>Gallery</h3>
                            <input type="file" id="webGallery" multiple>

                            <button id="saveWebsite" class="btn btn-success mt-2">Publish Website</button>
                        </div>
                    </div>

                    <!-- Tab: Connect -->
                    <div id="tabConnect" class="dash-tab">
                        <h2>Connect with Sellers</h2>
                        <div id="sellersGrid" class="sellers-grid"></div>
                    </div>

                    <!-- Tab: Admin -->
                    <div id="tabAdmin" class="dash-tab">
                        <h2>Admin Panel</h2>
                        <div class="card">
                            <h3>Global Ad Manager</h3>
                            <input type="file" id="adminAdImg">
                            <button id="btnUploadAd" class="btn btn-primary">Upload Ad</button>
                        </div>
                    </div>

                </main>
            </div>
        </section>
    </div>

    <!-- =======================================================
         PART 2: THE GENERATED WEBSITE (Public View)
    ======================================================== -->
    <div id="generatedSite" class="hidden">
        <header id="genHeader"></header>
        
        <section id="genHero" class="gen-hero"></section>

        <section id="genVehicles" class="gen-section">
            <h2 class="sec-title">Our Vehicles</h2>
            <div id="genCatFilter" class="filter-chips"></div>
            <div id="genVehicleGrid" class="vehicle-grid"></div>
        </section>

        <section id="genAbout" class="gen-section bg-alt">
            <h2 class="sec-title">About Us</h2>
            <div id="genAboutContent" class="container-text"></div>
        </section>

        <section id="genWhy" class="gen-section">
            <h2 class="sec-title">Why Choose Us</h2>
            <div id="genWhyGrid" class="features-grid"></div>
        </section>

        <section id="genGallery" class="gen-section bg-alt">
            <h2 class="sec-title">Gallery</h2>
            <div id="genGalleryGrid" class="gallery-grid"></div>
        </section>

        <section id="genReviews" class="gen-section">
            <h2 class="sec-title">Happy Customers</h2>
            <div class="features-grid">
                <div class="feat-card">⭐⭐⭐⭐⭐<p>Great service!</p></div>
                <div class="feat-card">⭐⭐⭐⭐⭐<p>Best quality cars.</p></div>
                <div class="feat-card">⭐⭐⭐⭐⭐<p>Highly recommended.</p></div>
            </div>
        </section>

        <section id="genContact" class="gen-section dark-footer">
            <h2 class="sec-title text-white">Contact Us</h2>
            <div class="contact-wrapper">
                <div id="genContactInfo" class="contact-info"></div>
                <div id="genMap" class="map-container">
                    <!-- Map placeholder -->
                    <div style="background:#ddd; height:100%; display:flex; align-items:center; justify-content:center;">Google Map</div>
                </div>
            </div>
            <div id="genFooter" class="footer-bottom"></div>
        </section>

        <a href="#" id="floatWhatsapp" class="float-wa hidden" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <!-- Main Logic -->
    <script src="script.js"></script>
</body>
</html>
